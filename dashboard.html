<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Stature Dashboard</title>
<style>
body{margin:0;background:#0f1115;color:#fff;font-family:system-ui;padding:20px}
.card{background:#1a1d23;padding:16px;border-radius:14px;margin-top:16px}
.label{opacity:.7;font-size:.85rem}
.value{font-size:1.4rem;margin-top:4px}
</style>
</head>
<body>

<h2>Projected Growth</h2>

<div class="card">
<div class="label">Projected Adult Height</div>
<div class="value" id="projection"></div>
</div>

<div class="card">
<div class="label">Growth Phase</div>
<div class="value" id="phase"></div>
</div>

<script>
const p=JSON.parse(localStorage.profile);
const m=JSON.parse(localStorage.metrics);
const h=JSON.parse(localStorage.habits);

// Genetic baseline
const GB=(p.father+p.mother+13)/2;

// Growth phase multiplier
let GPM=0.05;
if(p.age<=14)GPM=1;
else if(p.age<=16)GPM=.75;
else if(p.age<=18)GPM=.4;
else if(p.age<=21)GPM=.15;

// Proportion indicator
const legRatio=(p.height-m.sitting)/p.height;
const PI=(legRatio-0.52)*20;

// Wingspan modifier
const WS_Mod=Math.max(-2,Math.min(2,(m.wingspan-p.height)*0.3));

// Lifestyle
const sleepScore=Math.min(h.sleep/8,1);
const activityScore=h.activity=="High"?1:h.activity=="Moderate"?.7:.4;
const stressPenalty=h.stress=="High"?-1:h.stress=="Moderate"?-.5:0;
const LM=Math.max(-1,Math.min(1,(sleepScore+activityScore)/2+stressPenalty));
const lifestyleEffect=LM*2;

// Remaining growth
const RGE=(GB-p.height)*GPM;

// Final projection
const finalHeight=p.height+RGE+PI+WS_Mod+lifestyleEffect;

projection.innerText=
`${finalHeight.toFixed(1)} cm Â± 2.5 cm`;

phase.innerText=p.age<16?"Active Growth Phase":"Late Growth Phase";
</script>

</body>
</html>
